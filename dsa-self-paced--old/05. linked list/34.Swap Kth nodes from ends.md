https://www.geeksforgeeks.org/batch/dsa-4/track/DSASP-LinkedList/problem/swap-kth-node-from-beginning-and-kth-node-from-end-in-a-singly-linked-list

```cpp
/*
class Node {
  public:
    int data;
    Node *next;

    Node(int x) {
        data = x;
        next = NULL;
    }
};
*/

class Solution {
  public:
    Node* swapKth(Node* head, int k) {
        if(!head || !head->next) return head;

        int len=lenLL(head);
        if(k>len || k<0) return head;

        int p1=min(k,len-k+1);
        int p2=max(k,len-k+1);

        Node *p1Prev=nullptr,*p2Prev=nullptr;

        Node *tmp=head;
        while(tmp && (p1>=1 || p2>=1)){
            if(p1-1==1) p1Prev=tmp;
            if(p2-1==1) p2Prev=tmp;
            p1--;p2--;
            if(p1Prev && p2Prev) break;
            tmp=tmp->next;
        }

        //ranges
        Node *p1Nxt=p1Prev ? p1Prev->next:head,*p1NNxt=p1Nxt->next;
        Node *p2Nxt=p2Prev->next,*p2NNxt=p2Nxt->next;

        bool sideBySide=p1Nxt==p2Prev;
        p1Nxt->next=p2NNxt;
        if(p1Prev) p1Prev->next=p2Nxt;
        if(sideBySide){//nodes are side by side
            p2Nxt->next=p1Nxt;
        }else{
            p2Nxt->next=p1NNxt;
            p2Prev->next=p1Nxt;
        }

        if(!p2NNxt) head=p2Nxt;
        return head;
    }
  private:
    int lenLL(Node* head){
        int len=0;
        while(head){
            len++;
            head=head->next;
        }
        return len;
    }
};
```
