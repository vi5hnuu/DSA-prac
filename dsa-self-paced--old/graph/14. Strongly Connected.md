https://www.geeksforgeeks.org/problems/strongly-connected-components-kosarajus-algo/1

```cpp
//Position this line where user code will be pasted.
class Solution {
  public:
    int kosaraju(vector<vector<int>> &adj) {
        int v=adj.size();
        stack<int> finishTimeOrder;
        vector<bool> visited(v,false);

        for(int i=0;i<v;i++){
            if(visited[i]) continue;
            fillFinishTimeDFS(adj,finishTimeOrder,visited,i);
        }


        visited.assign(v,false);
        vector<vector<int>> *nadj=reverseEdges(adj);
        int scc=0;
        while(!finishTimeOrder.empty()){
            int v=finishTimeOrder.top();
            finishTimeOrder.pop();
            if(visited[v]) continue;
            dfs(*nadj,visited,v);
            scc++;
        }
        delete nadj;
        return scc;
    }
  private:
    vector<vector<int>>* reverseEdges(vector<vector<int>> &adj){
        int v=adj.size();
        vector<vector<int>> *nadj=new vector<vector<int>>(v,vector<int>());

        for(int i=0;i<v;i++){
            for(int neighbour:adj[i]){
                (*nadj)[neighbour].push_back(i);
            }
        }
        return nadj;
    }
    void fillFinishTimeDFS(vector<vector<int>> &adj,stack<int> &finishTimeOrder,vector<bool> &visited,int src){
        if(visited[src]) return;
        visited[src]=true;
        for(int neighbour:adj[src]){
            if(visited[neighbour]) continue;
            fillFinishTimeDFS(adj,finishTimeOrder,visited,neighbour);
        }
        finishTimeOrder.push(src);
    }
    void dfs(vector<vector<int>> &adj,vector<bool> &visited,int src){
        if(visited[src]) return;
        visited[src]=true;
        for(int neighbour:adj[src]){
            if(visited[neighbour]) continue;
            dfs(adj,visited,neighbour);
        }
    }
};
```
